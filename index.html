<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barakallah fie umriiikk syifaaaaağŸ¥³ğŸ˜˜</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Caveat:wght@700&family=Merriweather:ital@1&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { margin: 0; background: #e1f5fe; font-family: 'Quicksand', sans-serif; color: #01579b; overflow: hidden; touch-action: manipulation; }
        .screen { position: fixed; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: 0.8s; padding: 20px; box-sizing: border-box; }
        .hidden { display: none !important; }
        .item { position: absolute; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 5; }
        .bubble { background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(3, 169, 244, 0.4)); border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .gift { font-size: 45px; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1)); }
        .card { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 400px; position: relative; z-index: 10; border: 2px solid #fff; }
        .puisi-box { height: 400px; overflow-y: auto; text-align: left; font-family: 'Merriweather', serif; font-style: italic; line-height: 1.8; padding: 15px; background: rgba(255,255,255,0.4); border-radius: 20px; font-size: 0.9rem; scroll-behavior: smooth; }
        .petal { position: absolute; background: #b3e5fc; border-radius: 150% 0 150% 0; opacity: 0.6; pointer-events: none; z-index: 1; }
        button { padding: 12px 30px; background: #03a9f4; color: white; border: none; border-radius: 50px; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 5px 15px rgba(3,169,244,0.3); }
    </style>
</head>
<body>
    <audio id="bgMusic" loop><source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Ketsa/Raising_Frequecy/Ketsa_-_09_-_Interlude.mp3" type="audio/mp3"></audio>
    <audio id="popSound"><source src="https://www.soundjay.com/buttons/sounds/button-20.mp3" type="audio/mp3"></audio>
    <audio id="typeSound"><source src="https://www.soundjay.com/communication/sounds/typewriter-key-1.mp3" type="audio/mp3"></audio>

    <div id="step1" class="screen">
        <h1 style="font-family: 'Caveat'; font-size: 2.5rem; margin:0;">Barakallah fie umriiikk syifaaaaağŸ¥³ğŸ˜˜</h1>
        <p>Pecahkan 10 gelembung rindu dulu ya!</p>
        <div id="bubble-area"></div>
    </div>

    <div id="step2" class="screen hidden">
        <h1 style="font-family: 'Caveat'; font-size: 2.3rem; margin:0;">Tangkap 5 Kado Spesial! ğŸ</h1>
        <p>Klik kadonya biar bunganya mekar!</p>
        <div id="gift-area"></div>
    </div>

    <div id="step3" class="screen hidden">
        <div class="card">
            <h2 style="font-family: 'Caveat'; font-size: 2rem; margin: 0 0 10px 0;">Untuk Syifa Ushodry ğŸ’™</h2>
            <div id="puisiContent" class="puisi-box"></div>
            <button onclick="final()">Peluk Jauh! ğŸ¤—</button>
        </div>
    </div>

    <script>
        const music = document.getElementById('bgMusic');
        const pop = document.getElementById('popSound');
        const typeSound = document.getElementById('typeSound');
        let popped = 0; let gifts = 0;

        function initBubbles() {
            for(let i=0; i<10; i++) {
                const b = document.createElement('div');
                b.className = 'item bubble';
                let size = 65; b.style.width = b.style.height = size + 'px';
                let posX = Math.random() * (window.innerWidth - size);
                let posY = Math.random() * (window.innerHeight - size);
                let vx = (Math.random() - 0.5) * 5; let vy = (Math.random() - 0.5) * 5;
                function move() {
                    posX += vx; posY += vy;
                    if(posX <= 0 || posX >= window.innerWidth - size) vx *= -1;
                    if(posY <= 0 || posY >= window.innerHeight - size) vy *= -1;
                    b.style.left = posX + 'px'; b.style.top = posY + 'px';
                    if(b.parentNode) requestAnimationFrame(move);
                }
                b.onclick = () => {
                    music.play(); pop.currentTime=0; pop.play();
                    b.remove(); popped++;
                    if(popped === 10) changeStep(2);
                };
                document.getElementById('bubble-area').appendChild(b);
                move();
            }
        }

        function initGifts() {
            const interval = setInterval(() => {
                if(gifts >= 5) { clearInterval(interval); return; }
                const g = document.createElement('div');
                g.className = 'item gift'; g.innerHTML = 'ğŸ';
                g.style.left = Math.random() * 80 + 10 + 'vw'; g.style.top = '-60px';
                document.getElementById('gift-area').appendChild(g);
                let pos = -60;
                function fall() {
                    pos += 3.5; g.style.top = pos + 'px';
                    if(pos < window.innerHeight && g.parentNode) requestAnimationFrame(fall);
                    else g.remove();
                }
                g.onclick = () => {
                    pop.currentTime=0; pop.play();
                    g.innerHTML = 'ğŸŒ¸'; g.style.pointerEvents = 'none';
                    gifts++; if(gifts === 5) setTimeout(() => changeStep(3), 800);
                };
                fall();
            }, 1300);
        }

        function changeStep(s) {
            document.querySelectorAll('.screen').forEach(sec => sec.classList.add('hidden'));
            document.getElementById('step' + s).classList.remove('hidden');
            if(s === 2) initGifts();
            if(s === 3) { startPetals(); typePoem(); }
        }

        function typePoem() {
            const teks = `Barakallah fie umriiikk syifaağŸ¥³<br>Aku ga ahli membuat puisi but let me tryğŸ˜‹ğŸ˜‚<br><br>Di usiamu yang kini dua puluh tiga<br>Aku duduk terdiam, mengingat betapa hebatnya perjalanan kita.<br>Tujuh tahun bukan waktu yang singkat untuk sekadar singgah,<br>Aku ingin berterima kasih, meski kata mungkin takkan pernah cukup.<br>Terima kasih sudah menjadi rumah saat duniaku terasa tertutup.<br>Terimakasih selalu mendengarkan kisah, keluhan serta tangisku.<br>Terimakasih untuk pengertianmu tentang kondisiku yang seringkali terbatas,<br>Untuk setiap langkahmu menuju rumahku yang tak pernah kau hitung dengan ikhlas.<br><br>Aku tahu, mungkin ini terasa tidak adil bagimu,<br>Harus selalu kamu yang datang, harus selalu kamu yang menjemput temu.<br>Aku sering merasa terlalu banyak menuntut, sering merasa bersalah,<br>Tapi caramu tersenyum dan tetap hadir, membuat khawatirku luluh dan kalah.<br>Kau tak pernah protes mengapa aku tak bisa ke rumahmu,<br>Kau tak pernah mengeluh meski jarak dan izin orang tuaku menjadi belenggu.<br><br>Terimakasih, Syifa... karena sudah hadir dengan cara yang begitu sabar,<br>Menjadikan persahabatan ini tempat paling aman untukku bersandar.<br><br>Di usia 23 ini, doaku hanya satu untukmu:<br>Semoga semakin dewasa, semakin Sholihah, semakin baik, semua kebahagiaan selalu berada di sekelilingmu.<br>Tetaplah menjadi Syifa yang tangguh, yang tawanya selalu menenangkan.<br>Tetaplah menjadi syifa yang ceria.<br>Jangan lupa ingat, kamu yang terbaik di dunia, kamu yang tercantik sealam semesta ini.<br>Aku bangga memilikimu, aku bahagia kita berteman sejauh ini dan selama-lamanya.<br><br>Barakallah fie umriiikk, Sahabat Terbaikku. I Love You More Than Anything! ğŸ’™`;
            
            let n = 0; const target = document.getElementById("puisiContent");
            function typing() {
                if (n < teks.length) {
                    if (teks.slice(n, n + 4) === "<br>") { target.innerHTML += "<br>"; n += 4; }
                    else { 
                        target.innerHTML += teks.charAt(n); 
                        if(teks.charAt(n) !== " ") { typeSound.currentTime=0; typeSound.play(); }
                        n++; 
                    }
                    setTimeout(typing, 60);
                    target.scrollTop = target.scrollHeight;
                }
            }
            typing();
        }

        function startPetals() {
            setInterval(() => {
                const p = document.createElement('div');
                p.className = 'petal';
                p.style.width = p.style.height = Math.random() * 10 + 10 + 'px';
                p.style.left = Math.random() * 100 + 'vw'; p.style.top = '-20px';
                document.body.appendChild(p);
                let pos = -20; let rot = 0;
                function fall() {
                    pos += 2; rot += 2;
                    p.style.top = pos + 'px'; p.style.transform = `rotate(${rot}deg)`;
                    if(pos < window.innerHeight) requestAnimationFrame(fall);
                    else p.remove();
                }
                fall();
            }, 400);
        }

        function final() {
            confetti({ particleCount: 200, spread: 80, origin: { y: 0.6 } });
            alert("Barakallah Fie Umrik Syifa! ğŸ’™");
        }
        window.onload = initBubbles;
    </script>
</body>
</html>
